include ..\model\lists

#######################################################
#########         HYBRID         #####################
########################################################
### This file provides the equations defining the producer behaviour.


# From ThreeME / Master_France_CGDD (30/05/2018)
# Last commit was: 5f4949ffc7f75da1128dd53c2e1e4c62e1c4b051
# Files: hybrid_new.mdl; exceptions_AME-AMS.mdl

#########################################
# Building stock dynamic

## Stock of building of the energy efficiency class ecl
                                         
d(BUIL[ecl]) = (@year>%baseyear) * ( NewBUIL[ecl] _
                                   + sum(REHAB[ecl2,ecl] if REHAB[ecl2,ecl] <> 0 on ecl2) _
                                   + sum(DEP_BUIL[ecl2,ecl] if DEP_BUIL[ecl2,ecl] <> 0 on ecl2) _
                                   - (sum(REHAB[ecl,ecl2] if REHAB[ecl,ecl2] <> 0 on ecl2)) _
                                   - (sum(DEP_BUIL[ecl,bcl] if DEP_BUIL[ecl,bcl] <> 0 on bcl)))


#d(BUILbis[ecl]) = (@year>%baseyear)*(phi_NewBUIL[ecl]*(d(BUIL)+BUIL[DES]) _
#                                  + sum(REHAB[ecl2,ecl] if REHAB[ecl2,ecl] <> 0 on ecl2) _
#                                  + sum(delta_BUIL[ecl2,ecl]*BUIL[ecl2]{-1} if delta_BUIL[ecl2,ecl] <> 0 on ecl2) _
#                                  - (sum(REHAB[ecl,ecl2] if REHAB[ecl,ecl2] <> 0 on ecl2)) _
#                                  - (sum(delta_BUIL[ecl,bcl]*BUIL[ecl]{-1} if delta_BUIL[ecl,bcl] <> 0 on bcl)))


NewBUIL[ecl] =   (@year >  %baseyear) * phi_NewBUIL[ecl] * (d(BUIL) + BUIL[DES]) _
               + (@year <= %baseyear) * NewBUIL[h,ecl]{-1}


DEP_BUIL[ecl,bcl] =    (@year >  %baseyear) * delta_BUIL[ecl,bcl]*BUIL[ecl]{-1} _
                     + (@year <= %baseyear) * DEP_BUIL[ecl,bcl]{-1}

  
 # Equation H.4.37
  # Equation H.4.37
BUIL[DES] = sum(DEP_BUIL[ecl,DES] if DEP_BUIL[ecl,DES] <> 0 on ecl)

# BUILbis[DES] = sum(delta_BUIL[ecl,DES] * BUIL[ecl]{-1} if delta_BUIL[ecl,DES] <> 0 on ecl)



  #    Equation H.4.38
  
  d(log(BUIL)) = (@year>%baseyear)*(d(log(POP_tot)) + d(log(M2perCapita))) + (@year<=%baseyear)*log(1+STEADYSTATE(2,1)) 
  


 

#################################
# Specification de Gaël
# Equation H.4.70
   
#   NewBUIL[ecl] = ( @year > %baseyear ) * phi_NewBUIL[ecl] * ( d( BUIL ) + BUIL[DES] ) + _
#                     ( @year <= %baseyear ) * @elem(NewBUIL[ecl],%baseyear)*(1+STEADYSTATE(2,1))^(@year-%baseyear)


#@over d(BUIL[ecl]) = (@year>%baseyear)*( phi_NewBUIL[ecl]*(NewBUIL-BUIL[DES]) _
#                                            + sum(REHAB[ecl2,ecl] if REHAB[ecl2,ecl] <> 0 on ecl2) _
#                                            + sum(delta_BUIL[ecl2,ecl]*BUIL[ecl2]{-1} if delta_BUIL[ecl2,ecl] <> 0 on ecl2) _
#                                            - (sum(REHAB[ecl,ecl2] if REHAB[ecl,ecl2] <> 0 on ecl2)) _
#                                            - (sum(delta_BUIL[ecl,ecl2]*BUIL[ecl]{-1} if delta_BUIL[ecl,ecl2] <> 0 on ecl2))) + _
#                                            (@year<=%baseyear)*(BUIL[ecl]{-1}*STEADYSTATE(2,1))      # corrigé
 


#  BUIL[DES] = (@year>%baseyear)*(sum(delta_BUIL[ecl,DES] * BUIL[ecl]{-1} if delta_BUIL[ecl,DES] <> 0 on ecl)) + _ 
#                 (@year<=%baseyear)*(@elem(BUIL[DES],%baseyear)*(1+STEADYSTATE(2,1))^(@year-%baseyear))
   
   


