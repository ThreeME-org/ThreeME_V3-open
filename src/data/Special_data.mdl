include ..\model\lists

### This file defines the variables that are not loaded and that can not be calculated from their equation in the model. There may be several reasons: 
### - they are defined by a behavor equation.
### - using the equation of the model generate a circular reference

### Export of commodity c be used in the corresponding behavor equation
Xbis[c] := X[c]

YQSbis[c] := YQS[c]
MSbis[c] := MS[c]

### Calibration of parameter from Equations
PhiY[c, s] := Y[c, s]/YQ[c]
W[s] := WAGES[s] * PWAGES[s] / L[s] 
(1 + TMD[s]) := PY_n[s] / CU_n[s]

RNTAXCD[c] := NTAXCD[c]/YQ[c]
RNTAXCM[c] := NTAXCM[c]/ M[c]

### Calibrated from the volume version of an equation in value. Volume not in the model because of cirlar reference. 
### We can not use the Eq of the model:  YQ[c]*PYQ[c] + NTAXCD_VAL[c] + PMGPD[c]*MGPD[c] := PQD[c]*QD[c]
### because circular reference with NTAXCD_VAL[c] that depends on YQ[c].
### 
YQ[c] := sum(Y[c, s] on s)


### Idem for M[c]. M[c]*PM[c] + NTAXCM_VAL[c] + PMGPM[c]*MGPM[c] := PQM[c]*QM[c]
### because circular reference with NTAXCM_VAL[c] that depends on M[c]. Use round 0 instead:

M[c] := SUT($c,7) * (1 + GR_REAL) ^ (@year - %baseyear)


# Alias to be used in behavor equations
IA[s] := I[s]
E[s] := sum(CI[ce, s] on ce)
MAT[s] := sum(CI[cm, s] on cm)



# Expected and nominal variables are initialised to their real value
|V|_n[s] := |V|[s] where V in IA L E MAT K
|V|_e[s] := |V|[s] where V in IA L E MAT K



# All variable started by SUBST are calibrated to zero
SUBST_MGPD[cc, c] := 0
SUBST_MGPM[cc, c] := 0

SUBST_|V|_n[s] := 0 where V in IA L E MAT K
SUBST_|V|[s] := 0 where V in IA L E MAT K

#SUBST_|V|_n[c, s] := 0 where V in IA IAD IAM
#SUBST_|V|[c, s] := 0 where V in IA IAD IAM
#SUBST_|V|_n[ce, s] := 0 where V in E ED EM
#SUBST_|V|[ce, s] := 0 where V in E ED EM
#SUBST_|V|_n[cm, s] := 0 where V in MAT MATD MATM
#SUBST_|V|[cm, s] := 0 where V in MAT MATD MATM

#SUBST_|V|_n[c] := 0 where V in CHD CHM GD GM X XD XM
#SUBST_|V|[c] := 0 where V in CHD CHM GD GM X XD XM
#SUBST_|V|_n[trsp, c] := 0 where V in MTD MTM, c in %list_com \ %list_trsp
#SUBST_|V|[trsp, c] := 0 where V in MTD MTM, c in %list_com \ %list_trsp





# VERIF_|V| := 0 where V in PY_PYQ Y_YQ PIAxIA_PIxI PIA_PI IA_I GDP_GDPBIS GDP_GDPTER PGDP_PGDPBIS PGDP_PGDPTER ValGDP_ValGDPTER


