include ..\model\lists

include parameters

#############################################
#### Link with the rest of the model
#################################################

### TO BE COMMENTED when linked with the full model
P 		 :=  1 * (1 + GR_PRICES) ^ (@year - %baseyear)

CH[cele] := 1000 * (1 + GR_REAL) ^ (@year - %baseyear)
CH[cgas] := 1000 * (1 + GR_REAL) ^ (@year - %baseyear)
CH[coil] := 1000 * (1 + GR_REAL) ^ (@year - %baseyear)

PCH[cair] := P
PCH[crai] := P
PCH[croa] := P

DISPINC_AT_VAL := 1000000 * (1 + GR_NOMI) ^ (@year - %baseyear)

PCH := P

### END TO BE COMMENTED when linked with the full model

### TO BE DELETED when endogenized
P_km_traveler[crai] := P 
P_km_trav_auto_LD := P 

P_km_traveler[croa] := P 
P_km_trav_auto_SD := P 

### END TO BE DELETED when endogenized

# Share of household's energy consumption used by buildings
NCH_AUTO[cele] := CH[cele] * 0.01
NCH_AUTO[coil] := CH[coil] * 0.8
NCH_AUTO[cgas] := CH[cgas] * 0.05



#######################################
#####  Round 0: load primary date for transport block
###################################### 

CH_AUTO[cele] := NCH_AUTO[cele]
CH_AUTO[coil] := NCH_AUTO[coil] 
CH_AUTO[cgas] := NCH_AUTO[cgas]


AUTO_elec[ecl]  := TRANSPORT(10, $ecl)
AUTO_th[ecl,coil]  := TRANSPORT(11, $ecl)
AUTO_th[ecl,cgas]  := TRANSPORT(12, $ecl)

km_auto_LD := TRANSPORT(18, 9)
km_auto_SD := TRANSPORT(19, 9)

KM_AUTO_elec[ecl]    := TRANSPORT(20, $ecl)
KM_AUTO_th[ecl,coil] := TRANSPORT(21, $ecl)
KM_AUTO_th[ecl,cgas] := TRANSPORT(22, $ecl)


km_trav_auto_LD	  := TRANSPORT(24, 9)
km_trav_auto_SD	  := TRANSPORT(25, 9)	
Km_traveler[crai] := TRANSPORT(26, 9)  
Km_traveler[croa] := TRANSPORT(28, 9)  	
Km_traveler[cair] := TRANSPORT(30, 9)  


NewAUTO[ecl]  := TRANSPORT(34, $ecl)
NewAUTO_elec[ecl]  := TRANSPORT(36, $ecl)

NewAUTO_th[ecl,coil]  := TRANSPORT(38, $ecl)
NewAUTO_th[ecl,cgas]  := TRANSPORT(39, $ecl)

delta_AUTO_elec[ecl,DES] := TRANSPORT(44, $ecl) 
delta_AUTO[ecl,coil,DES] := TRANSPORT(45, $ecl)  
delta_AUTO[ecl,cgas,DES] := TRANSPORT(46, $ecl) 

CH_AUTO_toe[ecl,cele] := TRANSPORT(48, $ecl)
CH_AUTO_toe[ecl,coil] := TRANSPORT(49, $ecl)
CH_AUTO_toe[ecl,cgas] := TRANSPORT(50, $ecl)

#######################################
#####  Construct data directly from model equation
###################################### 

P_km_traveler_LD * km_traveler_LD := P_km_traveler[crai] * km_traveler[crai] + P_km_trav_auto_LD * km_trav_auto_LD

P_km_traveler_SD * km_traveler_SD := P_km_traveler[croa] * km_traveler[croa] + P_km_trav_auto_SD * km_trav_auto_SD

phi_km_trav_auto_LD := P_km_trav_auto_LD * km_trav_auto_LD / (P_km_traveler_LD * km_traveler_LD)

phi_km_trav_auto_SD := P_km_trav_auto_SD * km_trav_auto_SD / (P_km_traveler_SD * km_traveler_SD)

km_auto := km_auto_LD + km_auto_SD

NewAUTO_th := NewAUTO - NewAUTO_elec

AUTO_elec[ecl,DES] := delta_AUTO_elec[ecl,DES]*AUTO_elec[ecl]{-1}

AUTO_th[ecl,DES] := AUTO_th[ecl,coil,DES] + AUTO_th[ecl,cgas,DES] 

AUTO[ecl,DES] := AUTO_elec[ecl,DES] + AUTO_th[ecl,DES]

AUTO[DES] := sum(AUTO[ecl, DES] on ecl)

AUTO[ecl] := AUTO_elec[ecl] + AUTO_th[ecl]

AUTO_elec := sum(AUTO_elec[ecl] on ecl)

AUTO_th := sum(AUTO_th[ecl] on ecl)

AUTO_elec[DES] := sum(AUTO_elec[ecl, DES] on ecl)

AUTO_th[DES] := sum(AUTO_th[ecl, DES] on ecl)


AUTO_th[ecl,coil,DES] := delta_AUTO[ecl,coil,DES]*AUTO_th[ecl,coil]{-1}
AUTO_th[ecl,cgas,DES] := delta_AUTO[ecl,cgas,DES]*AUTO_th[ecl,cgas]{-1}

AUTO_th[ecl]  := AUTO_th[ecl,coil] + AUTO_th[ecl,cgas]

KM_AUTO_elec := km_auto * AUTO_elec / AUTO
KM_AUTO_th := km_auto - KM_AUTO_elec

CH_AUTO_toe[cele] := sum(CH_AUTO_toe[ecl,cele] on ecl)
CH_AUTO_toe[coil] := sum(CH_AUTO_toe[ecl,coil] on ecl)
CH_AUTO_toe[cgas] := sum(CH_AUTO_toe[ecl,cgas] on ecl)


#######################################
#####  Special data: not from model equation
###################################### 

travperauto_LD := 1000*km_trav_auto_LD/km_auto_LD
travperauto_SD := 1000*km_trav_auto_SD/km_auto_SD

km_traveler_LD := km_traveler[crai] + km_trav_auto_LD
km_traveler_SD := km_traveler[croa] + km_trav_auto_SD

AUTO := sum(AUTO[ecl] on ecl)

AUTObis := AUTO

NewAUTO_th[ecl] := NewAUTO_th[ecl,coil] + NewAUTO_th[ecl,cgas]

NewAUTO_th_bis[ecl] := NewAUTO_th[ecl]

NewAUTO := sum(NewAUTO[ecl] on ecl)

NewAUTO_elec := sum(NewAUTO_elec[ecl] on ecl)

kmPerAuto := km_auto / AUTO

share_elec := NewAUTO_elec/NewAUTO

phi_NewAUTO_elec[ecl] := NewAUTO_elec[ecl]/NewAUTO_elec

phi_NewAUTO_th[ecl] := NewAUTO_th[ecl]/NewAUTO_th

phi_NewAUTO_th[ecl,coil] := NewAUTO_th[ecl,coil]/NewAUTO_th[ecl] 

phi_NewAUTO_th[ecl,cgas] := NewAUTO_th[ecl,cgas]/NewAUTO_th[ecl] 


kmPerAuto_elec[ecl] := KM_AUTO_elec[ecl]  / AUTO_elec[ecl] 
kmPerAuto_th[ecl,coil] := KM_AUTO_th[ecl,coil] / AUTO_th[ecl,coil] 
kmPerAuto_th[ecl,cgas] := KM_AUTO_th[ecl,cgas] / AUTO_th[ecl,cgas]


toePerKm[ecl,cele] := CH_AUTO_toe[ecl,cele] / KM_AUTO_elec[ecl]
toePerKm[ecl,coil]  := CH_AUTO_toe[ecl,coil] / KM_AUTO_th[ecl,coil]
toePerKm[ecl,cgas]  := CH_AUTO_toe[ecl,cgas] / KM_AUTO_th[ecl,cgas]

verif_AUTObis  := 0
Verif_NewAUTO_th[ecl] := 0

